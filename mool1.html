<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Damaskino POS</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="theme-color" content="#0ea5e9">

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:'Cairo',sans-serif}
body{
  margin:0;background:#0b1220;color:#fff;
  height:100vh;display:flex;flex-direction:column
}
.hidden{display:none}
header{
  background:#111827;padding:14px;
  display:flex;justify-content:space-between;align-items:center
}
header h1{font-size:18px;margin:0}
.status{
  font-size:12px;padding:6px 10px;border-radius:20px
}
.status.active{background:#16a34a}
.status.inactive{background:#dc2626}

nav{
  display:flex;gap:6px;overflow-x:auto;
  padding:10px;background:#0f172a
}
nav button{
  background:#1e293b;color:#fff;border:none;
  padding:10px 14px;border-radius:14px;
  white-space:nowrap
}
nav button.active{background:#0ea5e9}

main{flex:1;overflow:auto;padding:12px}

.card{
  background:#111827;padding:16px;
  border-radius:16px;margin-bottom:14px
}
input,select,button{
  width:100%;padding:12px;margin-top:8px;
  border-radius:12px;border:none;font-size:14px
}
input,select{background:#1e293b;color:#fff}
.btn{background:#0ea5e9;color:#fff;font-weight:bold}
.btn.red{background:#dc2626}
.btn.green{background:#16a34a}

.notice{
  background:#fde68a;color:#000;
  padding:10px;border-radius:12px;
  margin-bottom:10px;font-size:13px
}

footer{
  padding:8px;text-align:center;
  font-size:12px;color:#94a3b8
}
</style>
</head>

<body>

<header>
  <h1>ğŸ§¾ Damaskino POS</h1>
  <div id="activationStatus" class="status inactive">ØºÙŠØ± Ù…ÙØ¹Ù„</div>
</header>

<nav>
  <button class="active" onclick="showTab('add',this)">Ø¥Ø¶Ø§ÙØ©</button>
  <button onclick="showTab('search',this)">Ø¨Ø­Ø«</button>
  <button onclick="showTab('products',this)">Ø§Ù„Ù…ÙˆØ§Ø¯</button>
  <button onclick="showTab('daily',this)">Ø§Ù„ÙŠÙˆÙ…ÙŠ</button>
  <button onclick="showTab('invoice',this)">ÙØ§ØªÙˆØ±Ø©</button>
</nav>

<main>

<!-- ADD -->
<div id="add" class="card">
  <h3>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h3>
  <input id="pName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©">
  <input id="pCode" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ù…Ø§Ø¯Ø©">
  <input id="pPrice" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø±">
  <button class="btn" onclick="addProduct()">Ø­ÙØ¸</button>
</div>

<!-- SEARCH -->
<div id="search" class="card hidden">
  <div class="notice" id="searchNotice">Ø§Ù„Ù…ÙŠØ²Ø© ØªØªØ·Ù„Ø¨ ØªÙØ¹ÙŠÙ„</div>
  <input id="sCode" placeholder="Ø¨Ø­Ø« Ø¨Ø§Ù„ÙƒÙˆØ¯">
  <input id="sPrice" type="number" placeholder="Ø¨Ø­Ø« Ø¨Ø§Ù„Ø³Ø¹Ø±">
  <button class="btn" onclick="searchProduct()">Ø¨Ø­Ø«</button>
  <div id="searchResult"></div>
</div>

<!-- PRODUCTS -->
<div id="products" class="card hidden">
  <h3>ğŸ“¦ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯</h3>
  <div id="productList"></div>
</div>

<!-- DAILY -->
<div id="daily" class="card hidden">
  <h3>ğŸ“Š Ø§Ù„Ù…Ø¨ÙŠØ¹ Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
  <div id="dailyList"></div>
</div>

<!-- INVOICE -->
<div id="invoice" class="card hidden">
  <div class="notice" id="invoiceNotice">Ø§Ù„Ù…ÙŠØ²Ø© ØªØªØ·Ù„Ø¨ ØªÙØ¹ÙŠÙ„</div>
  <select id="iProduct"></select>
  <input id="iQty" type="number" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
  <input id="iDiscount" type="number" placeholder="Ø®ØµÙ… %">
  <button class="btn green" onclick="calcInvoice()">Ø­Ø³Ø§Ø¨</button>
  <div id="invoiceResult"></div>
</div>

</main>

<footer>
  <button onclick="activate()" class="btn">ğŸ” ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</button>
</footer>

<script>
const ACTIVATION_CODE="0952725590";
let activated = localStorage.getItem("activated")==="true";

let products = JSON.parse(localStorage.getItem("products")||"[]");
let sales = JSON.parse(localStorage.getItem("sales")||"[]");

function refreshUI(){
  document.getElementById("activationStatus").textContent =
    activated ? "Ù…ÙØ¹Ù„ âœ”ï¸" : "ØºÙŠØ± Ù…ÙØ¹Ù„";
  document.getElementById("activationStatus").className =
    "status " + (activated?"active":"inactive");

  document.getElementById("searchNotice").style.display =
    activated?"none":"block";
  document.getElementById("invoiceNotice").style.display =
    activated?"none":"block";
}
refreshUI();

function activate(){
  let c = prompt("Ø§Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„");
  if(c===ACTIVATION_CODE){
    activated=true;
    localStorage.setItem("activated","true");
    alert("ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­ âœ”ï¸");
    refreshUI();
  }else{
    alert("ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­");
  }
}

function showTab(id,btn){
  document.querySelectorAll("main .card").forEach(d=>d.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}

function addProduct(){
  products.push({
    name:pName.value,
    code:pCode.value,
    price:+pPrice.value
  });
  localStorage.setItem("products",JSON.stringify(products));
  alert("ØªÙ… Ø§Ù„Ø­ÙØ¸");
  renderProducts();
}

function renderProducts(){
  productList.innerHTML="";
  iProduct.innerHTML="";
  products.forEach((p,i)=>{
    productList.innerHTML+=`<div>${p.name} - ${p.price}</div>`;
    iProduct.innerHTML+=`<option value="${i}">${p.name}</option>`;
  });
}
renderProducts();

function searchProduct(){
  if(!activated){alert("ÙŠÙ„Ø²Ù… Ø§Ù„ØªÙØ¹ÙŠÙ„");return;}
  let r=products.filter(p=>
    (!sCode.value||p.code.includes(sCode.value)) &&
    (!sPrice.value||p.price==sPrice.value)
  );
  searchResult.innerHTML=r.map(p=>`${p.name} - ${p.price}`).join("<br>");
}

function calcInvoice(){
  if(!activated){alert("ÙŠÙ„Ø²Ù… Ø§Ù„ØªÙØ¹ÙŠÙ„");return;}
  let p=products[iProduct.value];
  let total=p.price*iQty.value*(1-(iDiscount.value||0)/100);
  invoiceResult.innerHTML=`Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total}`;
}
</script>

</body>
</html>